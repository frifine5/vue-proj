webpackJsonp([11],{"5orW":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});s("/wAz");var r={name:"Register",data:function(){return{formParams:{unitName:"",creditCode:"",unitEmail:"",username:"",userAccount:"",password:"",cert:"",file:"",isAgree:!0},picName:"",maskShow:!0,hintWord:{companyName:"",creditCode:"",companyEmail:"",userName:"",userAccount:"",password:"",pic:""},maxLength:{companyName:150,username:30}}},mounted:function(){},methods:{sliderVerify:function(){var t=this;return new SliderVerification(null,{width:"266",height:"40",successCallback:function(){t.formParams.cert=localStorage.getItem("token"),t.maskShow=!0,t.getData()}})},register:function(t){this.formParams.unitName.trim()?this.formParams.creditCode.trim()?this.reg.creditCode.test(this.formParams.creditCode)?18===this.formParams.creditCode.length?this.formParams.unitEmail.trim()?this.reg.email.test(this.formParams.unitEmail)?this.formParams.username.trim()?this.formParams.userAccount.trim()?this.reg.userAccount.test(this.formParams.userAccount)?this.formParams.password.trim()?this.reg.password.test(this.formParams.password)?this.formParams.file?(this.maskShow=!1,this.sliderVerification=this.sliderVerify(),this.sliderVerification.showLayer(),t.stopPropagation()):this.hintWord.pic="未上传企业资质证明图片":this.hintWord.password="登录密码格式不正确":this.hintWord.password="登录密码不能为空":this.hintWord.userAccount="登录账号格式不正确":this.hintWord.userAccount="登录账号不能为空":this.hintWord.userName="用户名称不能为空":this.hintWord.companyEmail="单位邮箱格式不正确":this.hintWord.companyEmail="单位邮箱不能为空":this.hintWord.creditCode="统一社会信用代码长度不正确":this.hintWord.creditCode="统一社会信用代码格式不正确":this.hintWord.creditCode="统一社会信用代码不能为空":this.hintWord.companyName="单位名称不能为空"},getData:function(){var t=this,e=this,s=new FormData;s.append("file",this.formParams.file),s.append("companyName",this.formParams.unitName),s.append("companyCreditCode",this.formParams.creditCode),s.append("companyEmail",this.formParams.unitEmail),s.append("userName",this.formParams.username),s.append("userAccount",this.formParams.userAccount),s.append("userPassword",this.formParams.password),s.append("cert",this.formParams.cert),this.http.uploadFileFormData(this.ports.manage.register,s,function(s){s.success?t.$Modal.success({title:"提示框",content:"注册成功，请等待后台审核！",onOk:function(){e.$router.push({path:"/login"})}}):(t.$Modal.warning({title:"提示框",content:"注册失败,"+s.message,closable:!0}),t.picName="",t.deletePic())})},fileChange:function(t){if(this.hintWord.pic="",this.formParams.file="",!t.target.files){var e=document.getElementById("uploadInput");return this.formParams.file=e.value,void(this.picName=e.value.substring(e.value.lastIndexOf("\\")+1,e.value.length))}if(t.target){var s=t.target,r=!1;window.addEventListener?r=!1:window.attachEvent&&(r=!0);var a=0;if(r&&!s.files){var i=s.value;a=new ActiveXObject("Scripting.FileSystemObject").GetFile(i).Size}else a=s.files[0].size;if(a>10485760)return this.$Modal.warning({title:"提示框",content:"上传文件最大为10M，请重新上传。",closable:!0}),void this.deletePic();var o=s.value,n=o.substring(o.lastIndexOf(".")+1).toLowerCase();if("png"!==n&&"jpg"!==n)return this.$Modal.warning({title:"提示框",content:"请上传JPG、PNG格式的文件",closable:!0}),void this.deletePic();this.formParams.file=s.files[0],this.picName=s.value.substring(s.value.lastIndexOf("\\")+1,s.value.length)}},companyFocus:function(t){this.hintWord.companyName=""},creditCodeFocus:function(t){this.hintWord.creditCode=""},creditCodeBlur:function(t){18!==this.formParams.creditCode.length?this.hintWord.creditCode="统一社会信用代码长度不正确":this.reg.creditCode.test(this.formParams.creditCode)?this.hintWord.creditCode="":this.hintWord.creditCode="统一社会信用代码格式不正确"},companyEmailFocus:function(t){this.hintWord.companyEmail=""},companyEmailBlur:function(t){this.reg.email.test(this.formParams.unitEmail)?this.hintWord.companyEmail="":this.hintWord.companyEmail="邮箱格式不正确"},usernameFocus:function(t){this.hintWord.userName=""},userAccountFocus:function(t){this.hintWord.userAccount="登录账号必须是数字、字母或字母和数字的组合"},userAccountBlur:function(t){this.formParams.userAccount.length<6||this.formParams.userAccount.length>16?this.hintWord.userAccount="登录账号长度必须在6-16位之间":this.reg.userAccount.test(this.formParams.userAccount)?this.hintWord.userAccount="":this.hintWord.userAccount="登录账号格式不正确"},passwordFocus:function(){this.hintWord.password="登录密码必须是数字和字母的组合"},passwordBlur:function(){this.formParams.password.length<6||this.formParams.password.length>16?this.hintWord.password="密码长度必须在6-16位之间":this.reg.password.test(this.formParams.password)?this.hintWord.password="":this.hintWord.password="密码格式不正确"},deletePic:function(){this.picName="";var t=!1;t=window.navigator.userAgent.indexOf("MSIE")>=1;var e=document.getElementById("uploadInput");if(t){var s=document.createElement("form"),r=e.nextSibling,a=e.parentNode;s.appendChild(e),s.reset(),a.insertBefore(e,r),this.formParams.file=""}else e.value=""}}},a={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"r-wrap wrap"},[s("div",{staticClass:"maskBox",class:{hidden:t.maskShow},on:{click:function(e){t.maskShow=!0}}}),t._v(" "),s("div",{staticClass:"form-hd"},[t._v("单位注册")]),t._v(" "),s("div",{staticClass:"register"},[s("Form",{attrs:{model:t.formParams,onsubmit:"return false"}},[s("FormItem",[s("MyInput",{attrs:{inputValue:t.formParams.unitName,placeholder:"*请输入单位名称",maxLength:t.maxLength.companyName},on:{change:function(e,s){t.formParams.unitName=s},focus:t.companyFocus}}),t._v(" "),t.hintWord.companyName?s("p",{staticClass:"hint-word"},[t._v(t._s(t.hintWord.companyName))]):t._e()],1),t._v(" "),s("FormItem",[s("MyInput",{attrs:{inputValue:t.formParams.creditCode,placeholder:"*统一社会信用代码"},on:{change:function(e,s){t.formParams.creditCode=s},focus:t.creditCodeFocus,blur:t.creditCodeBlur}}),t._v(" "),t.hintWord.creditCode?s("p",{staticClass:"hint-word"},[t._v(t._s(t.hintWord.creditCode))]):t._e()],1),t._v(" "),s("FormItem",[s("MyInput",{attrs:{inputValue:t.formParams.unitEmail,placeholder:"*请输入单位邮箱"},on:{change:function(e,s){t.formParams.unitEmail=s},focus:t.companyEmailFocus,blur:t.companyEmailBlur}}),t._v(" "),t.hintWord.companyEmail?s("p",{staticClass:"hint-word"},[t._v(t._s(t.hintWord.companyEmail))]):t._e()],1),t._v(" "),s("FormItem",[s("MyInput",{attrs:{inputValue:t.formParams.username,placeholder:"*请输入用户名称",maxLength:t.maxLength.username},on:{change:function(e,s){t.formParams.username=s},focus:t.usernameFocus}}),t._v(" "),t.hintWord.userName?s("p",{staticClass:"hint-word"},[t._v(t._s(t.hintWord.userName))]):t._e()],1),t._v(" "),s("FormItem",[s("MyInput",{attrs:{inputValue:t.formParams.userAccount,placeholder:"*请输入登录账号"},on:{change:function(e,s){t.formParams.userAccount=s},focus:t.userAccountFocus,blur:t.userAccountBlur}}),t._v(" "),t.hintWord.userAccount?s("p",{staticClass:"hint-word"},[t._v(t._s(t.hintWord.userAccount))]):t._e()],1),t._v(" "),s("FormItem",[s("MyInput",{attrs:{inputValue:t.formParams.password,inputType:"password",placeholder:"*请输入登录密码"},on:{change:function(e,s){t.formParams.password=s},focus:t.passwordFocus,blur:t.passwordBlur}}),t._v(" "),t.hintWord.password?s("p",{staticClass:"hint-word"},[t._v(t._s(t.hintWord.password))]):t._e()],1),t._v(" "),s("FormItem",[s("div",{staticClass:"upload-formitem"},[s("span",[t._v("企业资质证明")]),t._v(" "),s("div",{staticClass:"uploadBox"},[s("MyButton",{class:{upbtn:!0,"error-upload":t.hintWord.pic},attrs:{id:"uploadBtn",type:"third"}},[s("MyIcon",{attrs:{interval:"interval",type:"yidongduan_conbanbenshengji"}}),t._v("上传文件")],1),t._v(" "),s("input",{staticClass:"upfile",attrs:{contentEditable:"false",type:"file",id:"uploadInput",name:"photos"},on:{change:t.fileChange}})],1),t._v(" "),s("span",{staticStyle:{"font-size":"12px",color:"#FF8F00"}},[t._v("支持png、jpg，最大10M")])]),t._v(" "),t.picName?s("div",{staticClass:"pic"},[s("span",[t._v(t._s(t.picName))]),s("span",{staticClass:"icon-del",on:{click:t.deletePic}},[s("MyIcon",{attrs:{type:"yidongduan_condelete"}})],1)]):t._e(),t._v(" "),t.hintWord.pic?s("p",{staticClass:"hint-word"},[t._v(t._s(t.hintWord.pic))]):t._e()]),t._v(" "),s("FormItem",[s("Button",{staticClass:"btn",attrs:{type:"primary"},on:{click:t.register}},[t._v("注册")])],1)],1),t._v(" "),s("div",{staticClass:"form-ft"},[s("p",[t._v("已有账号？"),s("router-link",{attrs:{to:"/login"}},[t._v("去登录")])],1)])],1)])},staticRenderFns:[]};var i=s("VU/8")(r,a,!1,function(t){s("q4qE")},"data-v-6b0fd6e6",null);e.default=i.exports},q4qE:function(t,e){}});